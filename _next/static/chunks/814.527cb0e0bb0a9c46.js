(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[814],{8202:(e,t,r)=>{var i;"undefined"!=typeof window?i=window:void 0!==r.g?i=r.g:"undefined"!=typeof self?i=self:i={},e.exports=i},5814:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var i=r(411),n=r.n(i),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){function e(e){this.value=e}function t(t){var r,i;function n(r,i){try{var s=t[r](i),o=s.value;o instanceof e?Promise.resolve(o.value).then(function(e){n("next",e)},function(e){n("throw",e)}):a(s.done?"return":"normal",s.value)}catch(e){a("throw",e)}}function a(e,t){switch(e){case"return":r.resolve({value:t,done:!0});break;case"throw":r.reject(t);break;default:r.resolve({value:t,done:!1})}(r=r.next)?n(r.key,r.arg):i=null}this._invoke=function(e,t){return new Promise(function(a,s){var o={key:e,arg:t,resolve:a,reject:s,next:null};i?i=i.next=o:(r=i=o,n(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}();var s=function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),h=function(e){if(!Array.isArray(e))return Array.from(e);for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r},u="";function l(e,t,r,i){var n=e.gl,a=n.createShader(r);return(n.shaderSource(a,t),n.compileShader(a),n.getShaderParameter(a,n.COMPILE_STATUS))?a:(u=n.getShaderInfoLog(a),console.error("*** Error compiling shader "+a+":"+u),e.trigger("error",{shader:a,source:t,type:r,error:u,offset:i||0}),n.deleteShader(a),null)}function f(e,t,r,i){for(var n=e.gl,a=n.createProgram(),s=0;s<t.length;++s)n.attachShader(a,t[s]);if(r)for(var o=0;o<r.length;++o)n.bindAttribLocation(a,i?i[o]:o,r[o]);return(n.linkProgram(a),n.getProgramParameter(a,n.LINK_STATUS))?a:(console.log("Error in program linking:"+(u=n.getProgramInfoLog(a))),n.deleteProgram(a),null)}function d(e){var t=new Set;return Object.assign(e,{on:function(e,r){var i={};i[e]=r,t.add(i)},off:function(e,r){if(r){var i={};i[e]=r,t.delete(i)}else{var n=!0,a=!1,s=void 0;try{for(var o,h=t[Symbol.iterator]();!(n=(o=h.next()).done);n=!0){var u=o.value,l=!0,f=!1,d=void 0;try{for(var g,c=Object.keys(u)[Symbol.iterator]();!(l=(g=c.next()).done);l=!0)if(g.value===e){t.delete(u);return}}catch(e){f=!0,d=e}finally{try{!l&&c.return&&c.return()}finally{if(f)throw d}}}}catch(e){a=!0,s=e}finally{try{!n&&h.return&&h.return()}finally{if(a)throw s}}}},listSubscriptions:function(){var e=!0,r=!1,i=void 0;try{for(var n,a=t[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var s=n.value;console.log(s)}}catch(e){r=!0,i=e}finally{try{!e&&a.return&&a.return()}finally{if(r)throw i}}},subscribe:function(e){t.add(e)},unsubscribe:function(e){t.delete(e)},unsubscribeAll:function(){t.clear()},trigger:function(e){for(var r=arguments.length,i=Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];var a=!0,s=!1,o=void 0;try{for(var u,l=t[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var f=u.value;"function"==typeof f[e]&&f[e].apply(f,h(i))}}catch(e){s=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(s)throw o}}}})}var g=function(){function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};s(this,e),d(this),this.gl=t,this.texture=t.createTexture(),this.texture&&(this.valid=!0),this.bind(),this.name=r,this.source=null,this.sourceType=null,this.loading=null,this.setData(1,1,new Uint8Array([0,0,0,255]),{filtering:"linear"}),this.setFiltering(i.filtering),this.load(i)}return o(e,[{key:"destroy",value:function(){this.valid&&(this.gl.deleteTexture(this.texture),this.texture=null,delete this.data,this.data=null,this.valid=!1)}},{key:"bind",value:function(t){this.valid&&("number"==typeof t&&e.activeUnit!==t&&(this.gl.activeTexture(this.gl.TEXTURE0+t),e.activeUnit=t),e.activeTexture!==this.texture&&(this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),e.activeTexture=this.texture))}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=null,"string"==typeof e.url?(void 0===this.url||e.url!==this.url)&&this.setUrl(e.url,e):e.element?this.setElement(e.element,e):e.data&&e.width&&e.height&&this.setData(e.width,e.height,e.data,e)}},{key:"setUrl",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.valid)return this.url=e,this.source=this.url,this.sourceType="url",this.loading=new Promise(function(i,n){var a=e.split(".").pop().toLowerCase(),s="ogv"===a||"webm"===a||"mp4"===a,o=void 0;s?((o=document.createElement("video")).autoplay=!0,o.muted=!0,setTimeout(function(){o.play()},1),r.filtering="nearest"):o=new Image,o.onload=function(){try{t.setElement(o,r)}catch(e){console.log("Texture '"+t.name+"': failed to load url: '"+t.source+"'",e,r)}i(t)},o.onerror=function(e){console.log("Texture '"+t.name+"': failed to load url: '"+t.source+"'",e,r),i(t)},/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&"data:"===t.source.slice(0,5)||(o.crossOrigin="anonymous"),o.src=t.source,s&&t.setElement(o,r)}),this.loading}},{key:"setData",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.width=e,this.height=t,this.source=r,this.sourceType="data",this.update(i),this.setFiltering(i),this.loading=Promise.resolve(this),this.loading}},{key:"setElement",value:function(e,t){var r=this,i=e;if("string"==typeof e&&(e=document.querySelector(e)),e instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof HTMLVideoElement)this.source=e,this.sourceType="element",e instanceof HTMLVideoElement?(this.width=this.source.videoWidth,this.height=this.source.videoHeight,e.addEventListener("canplaythrough",function(){r.intervalID=setInterval(function(){r.update(t)},15)},!0),e.addEventListener("ended",function(){e.currentTime=0,e.play()},!0)):this.update(t),this.setFiltering(t);else{var n="the 'element' parameter (`element: "+JSON.stringify(i)+"`) must be a CSS ";n+="selector string, or a <canvas>, <image> or <video> object",console.log("Texture '"+this.name+"': "+n,t)}return this.loading=Promise.resolve(this),this.loading}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.valid&&(this.bind(),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1!==e.UNPACK_FLIP_Y_WEBGL),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.UNPACK_PREMULTIPLY_ALPHA_WEBGL||!1),"element"===this.sourceType&&(this.source instanceof HTMLCanvasElement||this.source instanceof HTMLVideoElement||this.source instanceof HTMLImageElement&&this.source.complete)?(this.source instanceof HTMLVideoElement?(this.width=this.source.videoWidth,this.height=this.source.videoHeight):(this.width=this.source.width,this.height=this.source.height),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.source)):"data"===this.sourceType&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.width,this.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.source),this.trigger("loaded",this))}},{key:"setFiltering",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.valid){this.powerOf2=((e=this.width)&e-1)==0&&((t=this.height)&t-1)==0,this.filtering=r.filtering||"linear";var i=this.gl;this.bind(),this.powerOf2?(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,r.TEXTURE_WRAP_S||i.REPEAT),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,r.TEXTURE_WRAP_T||i.REPEAT),"mipmap"===this.filtering?(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR_MIPMAP_LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.generateMipmap(i.TEXTURE_2D)):"linear"===this.filtering?(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR)):"nearest"===this.filtering&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST))):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),"mipmap"===this.filtering&&(this.filtering="linear"),"nearest"===this.filtering?(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST)):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR)))}}}]),e}();g.getMaxTextureSize=function(e){return e.getParameter(e.MAX_TEXTURE_SIZE)},g.activeUnit=-1;var c=function(){function e(t,r,i){var a=this;s(this,e),d(this),r=r||{},i=i||{},t.hasAttribute("data-fullscreen")&&("1"==t.getAttribute("data-fullscreen")||"true"==t.getAttribute("data-fullscreen"))?(this.width=window.innerWidth,this.height=window.innerHeight,t.width=window.innerWidth,t.height=window.innerHeight):(this.width=t.clientWidth,this.height=t.clientHeight),this.canvas=t,this.gl=void 0,this.deps={},this.program=void 0,this.textures={},this.buffers={},this.uniforms={},this.vbo={},this.isValid=!1,this.animationFrameRequest=void 0,this.BUFFER_COUNT=0,this.vertexString=r.vertexString||"\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nattribute vec2 a_position;\nattribute vec2 a_texcoord;\n\nvarying vec2 v_texcoord;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0.0, 1.0);\n    v_texcoord = a_texcoord;\n}\n",this.fragmentString=r.fragmentString||"\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nvarying vec2 v_texcoord;\n\nvoid main(){\n    gl_FragColor = vec4(0.0);\n}\n";var o=function(e,t,r){function i(t,i){var n;"function"==typeof r?r(t):(n=e.parentNode)&&(n.innerHTML='\n<table style="background-color: #8CE; width: 100%; height: 100%;"><tr>\n<td align="center">\n<div style="display: table-cell; vertical-align: middle;">\n<div style="">'+i+"</div>\n</div>\n</td></tr></table>\n")}if(!window.WebGLRenderingContext)return i(1,'\n	This page requires a browser that supports WebGL.<br/>\n	<a href="http://get.webgl.org">Click here to upgrade your browser.</a>\n'),null;var n=function(e,t){for(var r=["webgl","experimental-webgl"],i=null,n=0;n<r.length;++n)try{i=e.getContext(r[n],t)}catch(e){if(i)break}return i}(e,t);return n?n.getExtension("OES_standard_derivatives"):i(2,'\n	It does not appear your computer can support WebGL.<br/>\n	<a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>\n'),n}(t,r,i.onError);if(o){if(this.gl=o,this.timeLoad=this.timePrev=performance.now(),this.timeDelta=0,this.forceRender=!0,this.paused=!1,this.realToCSSPixels=window.devicePixelRatio||1,t.style.backgroundColor=r.backgroundColor||"rgba(1,1,1,0)",t.hasAttribute("data-fragment"))this.fragmentString=t.getAttribute("data-fragment");else if(t.hasAttribute("data-fragment-url")){var h=t.getAttribute("data-fragment-url");n().get(h,function(e,t,r){a.load(r,a.vertexString)})}if(t.hasAttribute("data-vertex"))this.vertexString=t.getAttribute("data-vertex");else if(t.hasAttribute("data-vertex-url")){var u=t.getAttribute("data-vertex-url");n().get(u,function(e,t,r){a.load(a.fragmentString,r)})}if(this.load(),this.program){var l=o.getAttribLocation(this.program,"a_texcoord");this.vbo.texCoords=o.createBuffer(),this.gl.bindBuffer(o.ARRAY_BUFFER,this.vbo.texCoords),this.gl.bufferData(o.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),o.STATIC_DRAW),this.gl.enableVertexAttribArray(l),this.gl.vertexAttribPointer(l,2,o.FLOAT,!1,0,0);var f=o.getAttribLocation(this.program,"a_position");if(this.vbo.vertices=o.createBuffer(),this.gl.bindBuffer(o.ARRAY_BUFFER,this.vbo.vertices),this.gl.bufferData(o.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),o.STATIC_DRAW),this.gl.enableVertexAttribArray(f),this.gl.vertexAttribPointer(f,2,o.FLOAT,!1,0,0),t.hasAttribute("data-textures")){var g=t.getAttribute("data-textures").split(",");for(var c in g)this.setUniform("u_tex"+c,g[c])}var v={x:0,y:0};document.addEventListener("mousemove",function(e){v.x=e.clientX||e.pageX,v.y=e.clientY||e.pageY},!1);var m=this;return this.setMouse({x:0,y:0}),!function e(){m.nMouse>1&&m.setMouse(v),m.resize()&&(m.forceRender=!0),m.render(),m.animationFrameRequest=window.requestAnimationFrame(e)}(),this}}}return o(e,[{key:"destroy",value:function(){for(var e in cancelAnimationFrame(this.animationFrameRequest),this.animated=!1,this.isValid=!1,this.textures)e.destroy&&e.destroy();for(var t in this.textures={},this.attribs)this.gl.deleteBuffer(this.attribs[t]);for(var r in this.gl.useProgram(null),this.gl.deleteProgram(this.program),this.buffers){var i=this.buffers[r];this.gl.deleteProgram(i.program)}this.program=null,this.gl=null}},{key:"load",value:function(e,t){var r=this;t&&(this.vertexString=t),e&&(this.fragmentString=e);var i=this.fragmentString.split(/\r?\n/);if(this.fragmentString="#define PLATFORM_WEBGL\n#line 0\n",i.forEach(function(e,t){var i=e.trim();if(i.startsWith('#include "lygia')){var n=i.substring(15).replace(/\'|\"|\;|\s/g,"");if(n.endsWith("glsl")){if(void 0===r.deps[n]){var a,s="https://lygia.xyz"+n;(a=new XMLHttpRequest).open("GET",s,!1),a.send(),r.deps[n]=200==a.status?a.responseText:""}r.fragmentString+=r.deps[n]+"\n#line "+(t+1)+"\n"}}else r.fragmentString+=e+"\n"}),this.animated=!1,this.nDelta=(this.fragmentString.match(/u_delta/g)||[]).length,this.nTime=(this.fragmentString.match(/u_time/g)||[]).length,this.nDate=(this.fragmentString.match(/u_date/g)||[]).length,this.nMouse=(this.fragmentString.match(/u_mouse/g)||[]).length,this.animated=this.nDate>1||this.nTime>1||this.nMouse>1,this.fragmentString.search(/sampler2D/g))for(var n=this.fragmentString.split("\n"),a=0;a<n.length;a++){var s=n[a].match(/uniform\s*sampler2D\s*([\w]*);\s*\/\/\s*([\w|\:\/\/|\.|\-|\_]*)/i);if(s){var o=s[2].split(".").pop().toLowerCase();s[1]&&s[2]&&("jpg"===o||"jpeg"===o||"png"===o||"ogv"===o||"webm"===o||"mp4"===o)&&this.setUniform(s[1],s[2])}if(n[a].match(/\s*void\s*main\s*/g))break}var h=l(this,this.vertexString,this.gl.VERTEX_SHADER),u=l(this,this.fragmentString,this.gl.FRAGMENT_SHADER);u?this.isValid=!0:(u=l(this,"void main(){\n	gl_FragColor = vec4(1.0);\n}",this.gl.FRAGMENT_SHADER),this.isValid=!1);var d=f(this,[h,u]);this.gl.useProgram(d),this.gl.deleteShader(h),this.gl.deleteShader(u),this.program=d,this.change=!0,this.BUFFER_COUNT=0;var g=this.getBuffers(this.fragmentString);Object.keys(g).length&&this.loadPrograms(g),this.buffers=g,this.texureIndex=this.BUFFER_COUNT,this.trigger("load",{}),this.forceRender=!0,this.render()}},{key:"test",value:function(e,t,r){var i=this.vertexString,n=this.fragmentString,a=this.paused,s=this.gl.getExtension("EXT_disjoint_timer_query"),o=s.createQueryEXT(),h=this.isValid;(t||r)&&(this.load(t,r),h=this.isValid,this.forceRender=!0,this.render()),this.paused=!0,s.beginQueryEXT(s.TIME_ELAPSED_EXT,o),this.forceRender=!0,this.render(),s.endQueryEXT(s.TIME_ELAPSED_EXT);var u=this;!function l(){u.forceRender=!0,u.render();var f=s.getQueryObjectEXT(o,s.QUERY_RESULT_AVAILABLE_EXT),d=u.gl.getParameter(s.GPU_DISJOINT_EXT);if(f&&!d){var g={wasValid:h,frag:t||u.fragmentString,vert:r||u.vertexString,timeElapsedMs:s.getQueryObjectEXT(o,s.QUERY_RESULT_EXT)/1e6};u.paused=a,(t||r)&&u.load(n,i),e(g)}else window.requestAnimationFrame(l)}()}},{key:"loadTexture",value:function(e,t,r){var i=this;r||(r={}),"string"==typeof t?r.url=t:(void 0===t?"undefined":a(t))==="object"&&t.data&&t.width&&t.height?(r.data=t.data,r.width=t.width,r.height=t.height):(void 0===t?"undefined":a(t))==="object"&&(r.element=t),this.textures[e]?this.textures[e]&&(this.textures[e].load(r),this.textures[e].on("loaded",function(e){i.forceRender=!0})):(this.textures[e]=new g(this.gl,e,r),this.textures[e].on("loaded",function(e){i.forceRender=!0}))}},{key:"refreshUniforms",value:function(){this.uniforms={}}},{key:"setUniform",value:function(e){for(var t={},r=arguments.length,i=Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];t[e]=i,this.setUniforms(t)}},{key:"setUniforms",value:function(e){var t=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=[];for(var n in t){var s=t[n],o=void 0;if(r&&(n=r+"."+n),"number"==typeof s)i.push({type:"float",method:"1f",name:n,value:s});else if(Array.isArray(s)){if("number"==typeof s[0])1===s.length?i.push({type:"float",method:"1f",name:n,value:s}):s.length>=2&&s.length<=4?i.push({type:"vec"+s.length,method:s.length+"fv",name:n,value:s}):s.length>4&&i.push({type:"float[]",method:"1fv",name:n+"[0]",value:s});else if("string"==typeof s[0])i.push({type:"sampler2D",method:"1i",name:n,value:s});else if(Array.isArray(s[0])&&"number"==typeof s[0][0]){if(s[0].length>=2&&s[0].length<=4)for(o=0;o<s.length;o++)i.push({type:"vec"+s[0].length,method:s[o].length+"fv",name:n+"["+o+"]",value:s[o]})}else if("object"===a(s[0]))for(o=0;o<s.length;o++)i.push.apply(i,h(e(s[o],n+"["+o+"]")))}else"boolean"==typeof s?i.push({type:"bool",method:"1i",name:n,value:s}):"string"==typeof s?i.push({type:"sampler2D",method:"1i",name:n,value:s}):(void 0===s?"undefined":a(s))==="object"&&i.push.apply(i,h(e(s,n)))}return i}(e);for(var r in t)"sampler2D"===t[r].type?this.loadTexture(t[r].name,t[r].value[0]):this.uniform(t[r].method,t[r].type,t[r].name,t[r].value);this.forceRender=!0}},{key:"setMouse",value:function(e){var t=this.canvas.getBoundingClientRect();if(e&&e.x&&e.x>=t.left&&e.x<=t.right&&e.y&&e.y>=t.top&&e.y<=t.bottom){var r=(e.x-t.left)*this.realToCSSPixels,i=this.canvas.height-(e.y-t.top)*this.realToCSSPixels;this.uniform("2f","vec2","u_mouse",r,i)}}},{key:"uniform",value:function(e,t,r){this.uniforms[r]=this.uniforms[r]||{};for(var i,n=this.uniforms[r],a=arguments.length,s=Array(a>3?a-3:0),o=3;o<a;o++)s[o-3]=arguments[o];if((i=n.value)&&s&&i.toString()!==s.toString()||this.change||!n.location||!n.value)for(var h in n.name=r,n.type=t,n.value=s,n.method="uniform"+e,this.gl.useProgram(this.program),n.location=this.gl.getUniformLocation(this.program,r),this.gl[n.method].apply(this.gl,[n.location].concat(n.value)),this.buffers){var u=this.buffers[h];this.gl.useProgram(u.program);var l=this.gl.getUniformLocation(u.program,r);this.gl[n.method].apply(this.gl,[l].concat(n.value))}}},{key:"uniformTexture",value:function(e,t,r){if(void 0===this.textures[e])this.loadTexture(e,t,r);else{for(var i in this.uniform("1i","sampler2D",e,this.texureIndex),this.buffers){var n=this.buffers[i];this.gl.useProgram(n.program),this.gl.activeTexture(this.gl.TEXTURE0+this.texureIndex),this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[e].texture)}this.gl.useProgram(this.program),this.gl.activeTexture(this.gl.TEXTURE0+this.texureIndex),this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[e].texture),this.uniform("2f","vec2",e+"Resolution",this.textures[e].width,this.textures[e].height)}}},{key:"resize",value:function(){if(this.width===this.canvas.clientWidth&&this.height===this.canvas.clientHeight)return!1;this.realToCSSPixels=window.devicePixelRatio||1;var e=Math.floor(this.gl.canvas.clientWidth*this.realToCSSPixels),t=Math.floor(this.gl.canvas.clientHeight*this.realToCSSPixels);return(this.gl.canvas.width!==e||this.gl.canvas.height!==t)&&(this.gl.canvas.width=e,this.gl.canvas.height=t,this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height)),this.width=this.canvas.clientWidth,this.height=this.canvas.clientHeight,this.resizeSwappableBuffers(),!0}},{key:"render",value:function(){var e;if(this.visible=(e=this.canvas.getBoundingClientRect()).top+e.height>0&&e.top<(window.innerHeight||document.documentElement.clientHeight),this.forceRender||this.change||this.animated&&this.visible&&!this.paused){var t=new Date,r=performance.now();for(var i in this.timeDelta=(r-this.timePrev)/1e3,this.timePrev=r,this.nDelta>1&&this.uniform("1f","float","u_delta",this.timeDelta),this.nTime>1&&this.uniform("1f","float","u_time",(r-this.timeLoad)/1e3),this.nDate&&this.uniform("4f","float","u_date",t.getFullYear(),t.getMonth(),t.getDate(),3600*t.getHours()+60*t.getMinutes()+t.getSeconds()+.001*t.getMilliseconds()),this.uniform("2f","vec2","u_resolution",this.canvas.width,this.canvas.height),this.buffers){var n=this.buffers[i];this.uniform("1i","sampler2D",n.name,n.bundle.input.index)}for(var a in this.texureIndex=this.BUFFER_COUNT,this.textures)this.uniformTexture(a),this.texureIndex++;this.renderPrograms(),this.trigger("render",{}),this.change=!1,this.forceRender=!1}}},{key:"pause",value:function(){this.paused=!0}},{key:"play",value:function(){this.paused=!1}},{key:"renderPrograms",value:function(){var e=this.gl,t=e.canvas.width,r=e.canvas.height;for(var i in e.viewport(0,0,t,r),this.buffers){var n=this.buffers[i];n.bundle.render(t,r,n.program,n.name),e.bindFramebuffer(e.FRAMEBUFFER,null)}e.useProgram(this.program),e.drawArrays(e.TRIANGLES,0,6)}},{key:"getBuffers",value:function(e){var t={};return e&&e.replace(/(?:^\s*)((?:#if|#elif)(?:\s*)(defined\s*\(\s*BUFFER_)(\d+)(?:\s*\))|(?:#ifdef)(?:\s*BUFFER_)(\d+)(?:\s*))/gm,function(){var r=arguments[3]||arguments[4];t["u_buffer"+r]={fragment:"#define BUFFER_"+r+"\n"+e}}),t}},{key:"loadPrograms",value:function(e){var t=this.gl,r=l(this,this.vertexString,t.VERTEX_SHADER);for(var i in e){var n=e[i],a=l(this,n.fragment,t.FRAGMENT_SHADER,1);a?this.isValid=!0:(a=l(this,"void main(){\n	gl_FragColor = vec4(1.0);\n}",t.FRAGMENT_SHADER),this.isValid=!1);var s=f(this,[r,a]);n.name=i,n.program=s,n.bundle=this.createSwappableBuffer(this.canvas.width,this.canvas.height,s),t.deleteShader(a)}t.deleteShader(r)}},{key:"createSwappableBuffer",value:function(e,t,r){var i=this.createBuffer(e,t,r),n=this.createBuffer(e,t,r),a=this.gl;return{input:i,output:n,swap:function(){var e=i;i=n,n=e,this.input=i,this.output=n},render:function(e,t,r,i){a.useProgram(r),a.viewport(0,0,e,t),a.bindFramebuffer(a.FRAMEBUFFER,this.input.buffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this.output.texture,0),a.drawArrays(a.TRIANGLES,0,6),this.swap()},resize:function(e,t,r,i){a.useProgram(r),a.viewport(0,0,e,t),this.input.resize(e,t),this.output.resize(e,t)}}}},{key:"createBuffer",value:function(e,t,r){var i=this.gl,n=this.BUFFER_COUNT;this.BUFFER_COUNT+=2,i.getExtension("OES_texture_float");var a=i.createTexture();i.activeTexture(i.TEXTURE0+n),i.bindTexture(i.TEXTURE_2D,a),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e,t,0,i.RGBA,i.FLOAT,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE);var s=i.createFramebuffer();return{index:n,texture:a,buffer:s,W:e,H:t,resize:function(e,t){i.bindFramebuffer(i.FRAMEBUFFER,s);var r=Math.min(e,this.W),o=Math.min(t,this.H),h=new Float32Array(r*o*4);i.readPixels(0,0,r,o,i.RGBA,i.FLOAT,h),i.bindFramebuffer(i.FRAMEBUFFER,null);var u=n+1,l=i.createTexture();i.activeTexture(i.TEXTURE0+u),i.bindTexture(i.TEXTURE_2D,l),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e,t,0,i.RGBA,i.FLOAT,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,r,o,i.RGBA,i.FLOAT,h);var f=i.createFramebuffer();i.bindFramebuffer(i.FRAMEBUFFER,null),i.deleteTexture(a),i.activeTexture(i.TEXTURE0+n),i.bindTexture(i.TEXTURE_2D,l),n=this.index=n,a=this.texture=l,s=this.buffer=f,this.W=e,this.H=t}}}},{key:"resizeSwappableBuffers",value:function(){var e=this.gl,t=e.canvas.width,r=e.canvas.height;for(var i in e.viewport(0,0,t,r),this.buffers){var n=this.buffers[i];n.bundle.resize(t,r,n.program,n.name)}e.useProgram(this.program)}},{key:"version",value:function(){return"0.1.7"}}]),e}();window.addEventListener("load",function(){!function(){var e=document.getElementsByClassName("glslCanvas");if(e.length>0){window.glslCanvases=[];for(var t=0;t<e.length;t++){var r=new c(e[t]);r.isValid&&window.glslCanvases.push(r)}}}()});let v=c},7810:e=>{e.exports=function(e){if(!e)return!1;var r=t.call(e);return"[object Function]"===r||"function"==typeof e&&"[object RegExp]"!==r||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var t=Object.prototype.toString},6629:e=>{var t=function(e){return e.replace(/^\s+|\s+$/g,"")};e.exports=function(e){if(!e)return{};for(var r={},i=t(e).split("\n"),n=0;n<i.length;n++){var a,s=i[n],o=s.indexOf(":"),h=t(s.slice(0,o)).toLowerCase(),u=t(s.slice(o+1));void 0===r[h]?r[h]=u:(a=r[h],"[object Array]"===Object.prototype.toString.call(a))?r[h].push(u):r[h]=[r[h],u]}return r}},411:(e,t,r)=>{"use strict";var i=r(8202),n=r(7810),a=r(6629),s=r(3512);function o(e,t,r){var i=e;return n(t)?(r=t,"string"==typeof e&&(i={uri:e})):i=s(t,{uri:e}),i.callback=r,i}function h(e,t,r){return u(t=o(e,t,r))}function u(e){if(void 0===e.callback)throw Error("callback argument missing");var t,r,i,n=!1,s=function(t,r,i){n||(n=!0,e.callback(t,r,i))};function o(e){return clearTimeout(i),e instanceof Error||(e=Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,s(e,E)}function u(){if(!r){clearTimeout(i);var t,n=E,o=null;return 0!==(t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status)?(n={body:function(){var e=void 0;if(e=l.response?l.response:l.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(l),m)try{e=JSON.parse(e)}catch(e){}return e}(),statusCode:t,method:d,headers:{},url:f,rawRequest:l},l.getAllResponseHeaders&&(n.headers=a(l.getAllResponseHeaders()))):o=Error("Internal XMLHttpRequest Error"),s(o,n,n.body)}}var l=e.xhr||null;l||(l=e.cors||e.useXDR?new h.XDomainRequest:new h.XMLHttpRequest);var f=l.url=e.uri||e.url,d=l.method=e.method||"GET",g=e.body||e.data,c=l.headers=e.headers||{},v=!!e.sync,m=!1,E={body:void 0,headers:{},statusCode:0,method:d,url:f,rawRequest:l};if("json"in e&&!1!==e.json&&(m=!0,c.accept||c.Accept||(c.Accept="application/json"),"GET"!==d&&"HEAD"!==d&&(c["content-type"]||c["Content-Type"]||(c["Content-Type"]="application/json"),g=JSON.stringify(!0===e.json?g:e.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(u,0)},l.onload=u,l.onerror=o,l.onprogress=function(){},l.onabort=function(){r=!0},l.ontimeout=o,l.open(d,f,!v,e.username,e.password),v||(l.withCredentials=!!e.withCredentials),!v&&e.timeout>0&&(i=setTimeout(function(){if(!r){r=!0,l.abort("timeout");var e=Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",o(e)}},e.timeout)),l.setRequestHeader)for(t in c)c.hasOwnProperty(t)&&l.setRequestHeader(t,c[t]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(g||null),l}e.exports=h,e.exports.default=h,h.XMLHttpRequest=i.XMLHttpRequest||function(){},h.XDomainRequest="withCredentials"in new h.XMLHttpRequest?h.XMLHttpRequest:i.XDomainRequest,function(e,t){for(var r=0;r<e.length;r++)t(e[r])}(["get","put","post","patch","head","delete"],function(e){h["delete"===e?"del":e]=function(t,r,i){return(r=o(t,r,i)).method=e.toUpperCase(),u(r)}})},3512:e=>{e.exports=function(){for(var e={},r=0;r<arguments.length;r++){var i=arguments[r];for(var n in i)t.call(i,n)&&(e[n]=i[n])}return e};var t=Object.prototype.hasOwnProperty}}]);